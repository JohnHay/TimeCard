/*-
 * SPDX-License-Identifier: BSD-2-Clause
 *
 * Copyright (c) 2024 John Hay
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 */
#ifndef _TIMECARD_REG_H_
#define _TIMECARD_REG_H_

#define TC_IMAGE_VER_OFFS			0x00020000
#define TC_CORE_LIST_BASE			0x01300000
#define TC_PCIE_MSI_ENABLE_REG			0x00001800
/* On lite-pcie FW everything is offset */
#define	TC_LITE_PCIE_BASE			0x02000000

#define TC_MAX_MSI_IRQ				32
#define AXI_UART_OFFSET				0x00001000
#define TC_AXI_UART_CLK				(50*1000*1000)

#define AXI_GPIO_X_GPIO_REG			0
#define AXI_GPIO_X_GPIO2_REG			8

#define TC_GEN_VERSION_REG			0x0000000C
#define TC_GEN_VERSION_ALT_REG			0x00000010

#define TC_CLK_CONTROL_REG			0x00000000
#define TC_CLK_CONTROL_ENABLE			0x00000001
#define TC_CLK_CONTROL_TIME_ADJ			0x00000002
#define TC_CLK_CONTROL_OFFSET_ADJ		0x00000004
#define TC_CLK_CONTROL_DRIFT_ADJ		0x00000008
#define TC_CLK_CONTROL_SERVO_ADJ		0x00000100
#define TC_CLK_CONTROL_TIME			0x40000000
#define TC_CLK_CONTROL_TIME_VAL			0x80000000

#define TC_CLK_STATUS_REG			0x00000004
#define TC_CLK_STATUS_IN_SYNC			0x00000001
#define TC_CLK_STATUS_IN_HOLDOVER		0x00000002
#define TC_CLK_SELECT_REG			0x00000008
#define TC_CLK_VERSION_REG			0x0000000C
#define TC_CLK_TIMEVALUEL_REG			0x00000010
#define TC_CLK_TIMEVALUEH_REG			0x00000014
#define TC_CLK_TIMEADJVALUEL_REG		0x00000020
#define TC_CLK_TIMEADJVALUEH_REG		0x00000024
#define TC_CLK_OFFSETADJVALUE_REG		0x00000030
#define TC_CLK_OFFSETADJINTERVAL_REG		0x00000034
#define TC_CLK_DRIFTADJVALUE_REG		0x00000040
#define TC_CLK_DRIFTADJINTERVAL_REG		0x00000044
#define TC_CLK_INSYNCTHRESHOLD_REG		0x00000050
#define TC_CLK_SERVOOFFSETFACTORP_REG		0x00000060
#define TC_CLK_SERVOOFFSETFACTORI_REG		0x00000064
#define TC_CLK_SERVODRIFTFACTORP_REG		0x00000068
#define TC_CLK_SERVODRIFTFACTORI_REG		0x0000006C
#define TC_CLK_STATUSOFFSET_REG			0x00000070
#define TC_CLK_STATUSDRIFT_REG			0x00000074

#define TC_CORE_ENTRY_SIZE			0x40
#define TC_CORE_MAGIC_SIZE			(9*4)

#define TC_CORE_TYPE_END 			0x00000000
#define TC_CORE_TYPE_LIST 			0x00000001
#define TC_CORE_TYPE_ADJ_CLK 			0x00000002
#define TC_CORE_TYPE_SIG_GEN 			0x00000003
#define TC_CORE_TYPE_SIG_TSTMP 			0x00000004
#define TC_CORE_TYPE_PPS_GEN 			0x00000005
#define TC_CORE_TYPE_FREQ_CNT 			0x00000006
#define TC_CORE_TYPE_CLK_DET 			0x00000007
#define TC_CORE_TYPE_SMA_SEL 			0x00000008
#define TC_CORE_TYPE_PPS_SEL 			0x00000009
#define TC_CORE_TYPE_FPGA_VER 			0x0000000A
#define TC_CORE_TYPE_PPS_SLAVE 			0x0000000B
#define TC_CORE_TYPE_TOD_SLAVE 			0x0000000C
#define TC_CORE_TYPE_DUMMY 			0x0000000D
#define TC_CORE_TYPE_AXI_PCIE 			0x00010000
#define TC_CORE_TYPE_AXI_GPIO 			0x00010001
#define TC_CORE_TYPE_AXI_IIC 			0x00010002
#define TC_CORE_TYPE_AXI_UART 			0x00010003
#define TC_CORE_TYPE_AXI_HWICAP			0x00010004
#define TC_CORE_TYPE_AXI_QSPI 			0x00010005

#define TC_PPS_SLAVE_CONTROL_REG		0x00000000
#define TC_PPS_SLAVE_CONTROL_ENABLE		0x00000001
#define TC_PPS_SLAVE_STATUS_REG			0x00000004
#define TC_PPS_SLAVE_STATUS_PERIOD_ERR		0x00000001
#define TC_PPS_SLAVE_STATUS_PULSE_WIDTH_ERR	0x00000002
#define TC_PPS_SLAVE_POLARITY_REG		0x00000008
#define TC_PPS_SLAVE_VERSION_REG		0x0000000C
#define TC_PPS_SLAVE_PULSE_WIDTH_REG		0x00000010
#define TC_PPS_SLAVE_CABLE_DELAY_REG		0x00000020

#define TC_TOD_CONTROL_REG			0x00000000
#define TC_TOD_CONTROL_ENABLE			0x00000001
#define TC_TOD_STATUS_REG			0x00000004
#define TC_TOD_STATUS_PARSE_ERR			0x00000001
#define TC_TOD_STATUS_CHECKSUM_ERR		0x00000002
#define TC_TOD_STATUS_UART_ERR			0x00000004
#define TC_TOD_STATUS_MASK			0x00000007
#define TC_TOD_POLARITY_REG			0x00000008
#define TC_TOD_VERSION_REG			0x0000000C
#define TC_TOD_CORRECTION_REG			0x00000010
#define TC_TOD_BAUDRATE_REG			0x00000020
#define TC_TOD_UTC_STATUS_REG			0x00000030
#define TC_TOD_UTC_STATUS_UTC_OFF		0x000000FF
#define TC_TOD_UTC_STATUS_UTC_VALID		0x00000100
#define TC_TOD_UTC_STATUS_LEAP_ANN		0x00001000
#define TC_TOD_UTC_STATUS_LEAP_59		0x00002000
#define TC_TOD_UTC_STATUS_LEAP_61		0x00004000
#define TC_TOD_UTC_STATUS_LEAP_VALID		0x00010000
#define TC_TOD_TIME_TO_LEAP_SECOND		0x00000034
#define TC_TOD_GNSS_STATUS_REG			0x00000040
#define TC_TOD_GNSS_STATUS_MSK			0x00000007
#define TC_TOD_GNSS_FIX_OK			0x00010000
#define TC_TOD_GNSS_FIX				0x001E0000
#define TC_TOD_GNSS_FIX_VALID			0x10000000
#define TC_TOD_SAT_NUM_REG			0x00000044
#define TC_TOD_SAT_NUM_SEEN			0x000000FF
#define TC_TOD_SAT_NUM_LOCKED			0x0000FF00
#define TC_TOD_SAT_NUM_VALID			0x00010000

#define TC_TSTMPR_CNTRL_REG			0x00000000
#define TC_TSTMPR_STS_REG			0x00000004
#define TC_TSTMPR_POL_REG			0x00000008
#define TC_TSTMPR_VER_REG			0x0000000C
#define TC_TSTMPR_CDLY_REG			0x00000020
#define TC_TSTMPR_IRQ_REG			0x00000030
#define TC_TSTMPR_IRQMSK_REG			0x00000034
#define TC_TSTMPR_EVCNT_REG			0x00000038
#define TC_TSTMPR_CNT_REG			0x00000040
#define TC_TSTMPR_TIMEL_REG			0x00000044
#define TC_TSTMPR_TIMEH_REG			0x00000048
#define TC_TSTMPR_DWIDTH_REG			0x0000004C
#define TC_TSTMPR_DATA_REG			0x00000050

#endif
